myApp.controller("PetController",["PetService","$http","TextService","UserListService","$location","$window","UploadService","FavoriteService",function(a,b,c,d,e,f,g,h){var i=this;i.petList=[],i.message=a.allPets.message,b.get("/pets").then(function(b){console.log(b),b.data.user.username?(i.userName=b.data.user.username,i.phoneNumber=b.data.user.phone,i.houseHold=b.data.user.household,i.userList=[],d.getUserList().then(function(a){for(var b=0;b<a.length;b++)a[b].household===i.houseHold&&i.userList.push(a[b])}),a.getPetCare(i.houseHold).then(function(a){i.careList=a})):e.path("/home")}),i.getAllPets=function(){a.getAllPets().then(function(a){i.petList=[];for(var b=0;b<a.length;b++)a[b].household===i.houseHold&&i.petList.push(a[b])})},i.getAllPets(),i.addNewPet=function(){console.log("adding a new pet!");var b={name:i.name,breed:i.breed,color:i.color,age:i.age,agelength:i.agelength,care:i.care,owner:i.owner,feed:i.checkbox.feed,water:i.checkbox.water,walk:i.checkbox.walk,bathe:i.checkbox.bathe,treats:i.checkbox.treats,litter:i.checkbox.treats,household:i.houseHold,petimg:i.petImgUrl,favorites:[]};a.addNewPet(b).then(function(){i.name="",i.breed="",i.color="",i.age="",i.care="",i.owner="",i.checkbox.feed=!1,i.checkbox.water=!1,i.checkbox.walk=!1,i.checkbox.bathe=!1,i.checkbox.treats=!1,i.checkbox.litter=!1,i.uploadMessage=""})},i.removePet=function(b){console.log("removing",b),a.removePet(b).then(function(){console.log("pet has been removed"),i.getAllPets()})},i.actionObject={care:[]},i.addAction=function(a,b){switch(b){case"Fed":i.actionObject.care.push(a+" was fed.");break;case"Given Water":i.actionObject.care.push(a+" was given water.");break;case"Walked":i.actionObject.care.push(a+" was taken on a walk.");break;case"Bathed":i.actionObject.care.push(a+" was given a bath.");break;case"Given Treat":i.actionObject.care.push(a+" was given a treat.");break;case"Changed Litter":i.actionObject.care.push(a+" had his/her litter changed.");break;default:alert("None of the cases were met")}},i.sendText=function(){for(var a="",b={action:i.actionObject,number:"",extra:i.observations},d=0;d<i.userList.length;d++)a="+1"+i.userList[d].phone,b.number=a,c.sendText(b);console.log("weird object",i.actionObject),i.actionObject={care:[]},i.observations=""},i.uploadMessage="",i.showPicker=function(){g.showPicker().then(function(a){i.petImgUrl=a,i.uploadMessage="Picture has been uploaded!",console.log("Pet img has been uploaded")})},i.getFavorites=function(){console.log("$$$$$ Getting Faves"),h.getFavorites().then(function(a){i.favoritesList=a})},i.addFavorite=function(){i.petIn=JSON.parse(i.petIn),console.log("petIn:",i.petIn),console.log("petIn:",i.petIn.name);var a=i.petIn,b=[i.itemType,i.item];a.favorites.push(b),h.addFavorite(a).then(function(){i.getAllPets(),i.item="",i.itemType=""})}}]);