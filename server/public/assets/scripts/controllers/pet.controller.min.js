myApp.controller("PetController",["$routeParams","PetService","$http","TextService","UserListService","$location","$window","UploadService","FavoriteService",function(a,b,c,d,e,f,g,h,i){var j=this;j.petList=[],j.message=b.allPets.message,c.get("/pets").then(function(a){a.data.user.username?(j.userName=a.data.user.username,j.phoneNumber=a.data.user.phone,j.houseHold=a.data.user.household,j.userList=[],e.getUserList().then(function(a){for(var b=0;b<a.length;b++)a[b].household===j.houseHold&&j.userList.push(a[b])}),b.getPetCare(j.houseHold).then(function(a){j.careList=a})):f.path("/home")}),j.getAllPets=function(){b.getAllPets().then(function(a){j.petList=[];for(var b=0;b<a.length;b++)a[b].household===j.houseHold&&j.petList.push(a[b])})},j.getAllPets(),j.addNewPet=function(){var a={name:j.name,breed:j.breed,color:j.color,age:j.age,agelength:j.agelength,care:j.care,owner:j.owner,feed:j.checkbox.feed,water:j.checkbox.water,walk:j.checkbox.walk,bathe:j.checkbox.bathe,treats:j.checkbox.treats,litter:j.checkbox.treats,household:j.houseHold,petimg:j.petImgUrl,favorites:[]};b.addNewPet(a).then(function(){j.name="",j.breed="",j.color="",j.age="",j.care="",j.owner="",j.checkbox.feed=!1,j.checkbox.water=!1,j.checkbox.walk=!1,j.checkbox.bathe=!1,j.checkbox.treats=!1,j.checkbox.litter=!1,j.uploadMessage=""})},j.removePet=function(a){b.removePet(a).then(function(){j.getAllPets()})},j.actionObject={care:[]},j.addAction=function(a,b){switch(b){case"Fed":j.actionObject.care.push(a+" was fed.");break;case"Given Water":j.actionObject.care.push(a+" was given water.");break;case"Walked":j.actionObject.care.push(a+" was taken on a walk.");break;case"Bathed":j.actionObject.care.push(a+" was given a bath.");break;case"Given Treat":j.actionObject.care.push(a+" was given a treat.");break;case"Changed Litter":j.actionObject.care.push(a+" had his/her litter changed.");break;default:alert("None of the cases were met")}},j.sendText=function(){for(var a="",b={action:j.actionObject,number:"",extra:j.observations},c=0;c<j.userList.length;c++)a="+1"+j.userList[c].phone,b.number=a,d.sendText(b);j.actionObject={care:[]},j.observations=""},j.uploadMessage="",j.showPicker=function(){h.showPicker().then(function(a){j.petImgUrl=a,j.uploadMessage="Picture has been uploaded!"})},j.getFavorites=function(){i.getFavorites().then(function(a){j.favoritesList=a})},j.addFavorite=function(){j.petIn=JSON.parse(j.petIn);var a=j.petIn,b=[j.itemType,j.item];a.favorites.push(b),i.addFavorite(a).then(function(){j.getAllPets(),j.item="",j.itemType=""})},j.indivName="",j.indivBreed="",j.indivColor="",j.indivAge="",j.indivPetimg="",j.indivOwner="",j.indivCare="",j.indivFavorites="",j.indivId=a.id,j.getIndividualPet=function(){j.indivId=a.id;var c={};b.getAllPets().then(function(b){for(var d=0;d<b.length;d++)b[d]._id===j.indivId&&(c=b[d]);console.log("%%%%%%%%%%%%%%%%THIS IS THE PET",c),j.indivName=c.name,j.indivBreed=c.breed,j.indivColor=c.color,j.indivAge=c.age+" "+c.agelength,j.indivPetimg=c.petimg,j.indivOwner=c.owner,j.indivCare=c.care,j.indivFavorites=c.favorites,console.log("This is the $routeParams.id",a.id)})}}]);